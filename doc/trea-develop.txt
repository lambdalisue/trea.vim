*trea-develop.txt*		Developer's documentation for trea.vim

Author:  Alisue <lambdalisue@hashnote.net>
License: MIT license


=============================================================================
SCHEME					*trea-develop-scheme*

-----------------------------------------------------------------------------
PROVIDER					*trea-develop-provider*

Provider instance MUST have the following methods

get_key({uri})		*trea-develop-provider.get_key()*
	Return a string list which is used as a key of node from the {uri}.

get_uri({key})		*trea-develop-provider.get_uri()*
	Return a string which is an representation of a given {key}.

get_root()		*trea-develop-provider.get_root()*
	Return a root node (|trea-develop-node|) of the provider.

get_children({node})	*trea-develop-provider.get_children()*
	Return a promise which resolves to a list of children of the {node}.
	The promise will be rejected when the {node} is not a branch node.

-----------------------------------------------------------------------------
NODE						*trea-develop-node*

A node instance has at least the following attributes.
Note that attributes starts from "__" are automatically filled by trea itself.

key			*trea-develop-node.key*
	An unique string list which is used to identify the node.

text			*trea-develop-node.text*
	A string which is used in renderer to display the node.
	If the attribute is missing, the last part of the "key" is used.

branch			*trea-develop-node.branch*
	An integer (0 or 1) to indicate whether the node is a branch node.

__status		*trea-develop-node.__status*
	An integer to indicate the status of the node. The value MUST be one
	of the followings.

	|trea#node#STATUS_COLLAPSED|	The node is collapsed
	|trea#node#STATUS_EXPANDED|	The node is expanded

	Note that developers should use |trea#node#status()| instead for
	general purpose.

__processing		*trea-develop-node.__processing*
	An integer (0 or 1)to indicate wheter the node is processing.
	With default renderer, all nodes which is processing are drawn with
	spinning spinner.

	Note that developers should use |trea#node#processing()| instead for
	general purpose.

__parent		*trea-develop-node.__parent*
	A reference to it's parent node. The value of root node is |v:null|.

	Note that developers should use |trea#node#parent()| instead for
	general purpose.

Note that custom attribute names should start from "_" to distinguish from
reserved attributes.

Note that attribute names start from "__" is reserved for internal purpose so
developers must NOT use such attribute names in node instances.

-----------------------------------------------------------------------------
COMPARATOR					*trea-develop-comparator*

A comparator instance MUST have the following methods

compare({node1}, {node2})	*trea-develop-comparator.compare()*
	Return 0 when the {node1} is equal to the {node2}.
	Return 1 when the {node1} is grater than the {node2}.
	Return -1 when the {node1} is smaller than the {node2}.


-----------------------------------------------------------------------------
RENDERER					*trea-develop-renderer*

A renderer instance MUST have the following methods

index({lnum})		*trea-develop-renderer.index()*
	Return a corresponding index of a node for a given {lnum}.

render({nodes}, {marks})	*trea-develop-renderer.render()*
	Return a list of string which will be written to the buffer.

syntax()		*trea-develop-renderer.syntax()*
	Invoked when a viewer is initialized to define syntax of the render.

highlight()		*trea-develop-renderer.highlight()*
	Invoked when a viewer is initialized or |ColorScheme| autocmd has
	emitted to define highlight of the render.


=============================================================================
vim:tw=78:fo=tcq2mM:ts=8:ft=help:norl
